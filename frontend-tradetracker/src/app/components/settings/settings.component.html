<div class="settings-container">
  <div class="header">
    <h2>Paramètres</h2>
  </div>
  
  <div class="settings-section">
    <h3>Taux de Change</h3>
    <div class="card">
      <div class="card-body">
        <form [formGroup]="exchangeRateForm" (ngSubmit)="updateExchangeRates()">
          <div class="form-row">
            <div class="form-group">
              <label for="eurToUsd">EUR → USD</label>
              <input 
                type="number" 
                id="eurToUsd" 
                formControlName="eurToUsd"
                class="form-control"
                step="0.01"
                [ngClass]="{'invalid': exchangeRateForm.get('eurToUsd')?.invalid && exchangeRateForm.get('eurToUsd')?.touched}"
              >
              <div class="error-message" *ngIf="exchangeRateForm.get('eurToUsd')?.invalid && exchangeRateForm.get('eurToUsd')?.touched">
                Le taux doit être supérieur à 0.
              </div>
            </div>
            
            <div class="form-group">
              <label for="usdToEur">USD → EUR</label>
              <input 
                type="number" 
                id="usdToEur" 
                formControlName="usdToEur"
                class="form-control"
                step="0.01"
                [ngClass]="{'invalid': exchangeRateForm.get('usdToEur')?.invalid && exchangeRateForm.get('usdToEur')?.touched}"
              >
              <div class="error-message" *ngIf="exchangeRateForm.get('usdToEur')?.invalid && exchangeRateForm.get('usdToEur')?.touched">
                Le taux doit être supérieur à 0.
              </div>
            </div>
          </div>
          
          <div class="help-text">
            Ces taux sont utilisés pour convertir les devises lors de l'affichage des totaux.
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn btn-primary" [disabled]="exchangeRateForm.invalid">Mettre à jour</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  <div class="settings-section">
    <h3>Affichage</h3>
    <div class="card">
      <div class="card-body">
        <form [formGroup]="displaySettingsForm" (ngSubmit)="updateDisplaySettings()">
          <div class="form-group">
            <label for="defaultCurrency">Devise par défaut</label>
            <select id="defaultCurrency" formControlName="defaultCurrency" class="form-control">
              <option value="USD">USD</option>
              <option value="EUR">EUR</option>
            </select>
          </div>
          
          <div class="form-group checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="showPerformanceMetrics" formControlName="showPerformanceMetrics">
              <label for="showPerformanceMetrics">Afficher les métriques de performance</label>
            </div>
          </div>
          
          <div class="form-group checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="enableDarkMode" formControlName="enableDarkMode">
              <label for="enableDarkMode">Activer le mode sombre</label>
            </div>
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn btn-primary" [disabled]="displaySettingsForm.invalid">Enregistrer</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  <div class="settings-section">
    <h3>Règles de Retrait Automatique</h3>
    <div class="card">
      <div class="card-body">
        <form [formGroup]="withdrawalRulesForm" (ngSubmit)="updateWithdrawalRules()">
          <div class="form-group checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="autoSuggestWithdrawals" formControlName="autoSuggestWithdrawals">
              <label for="autoSuggestWithdrawals">Suggérer automatiquement les retraits</label>
            </div>
          </div>
          
          <div class="form-group">
            <label for="minWithdrawalAmount">Montant minimum de retrait</label>
            <input 
              type="number" 
              id="minWithdrawalAmount" 
              formControlName="minWithdrawalAmount"
              class="form-control"
              [ngClass]="{'invalid': withdrawalRulesForm.get('minWithdrawalAmount')?.invalid && withdrawalRulesForm.get('minWithdrawalAmount')?.touched}"
            >
            <div class="error-message" *ngIf="withdrawalRulesForm.get('minWithdrawalAmount')?.invalid && withdrawalRulesForm.get('minWithdrawalAmount')?.touched">
              Le montant doit être positif ou nul.
            </div>
          </div>
          
          <div class="form-group">
            <label for="keepPercentageOfProfit">Pourcentage des profits à conserver</label>
            <div class="range-input-container">
              <input 
                type="range" 
                id="keepPercentageOfProfit" 
                formControlName="keepPercentageOfProfit"
                min="0"
                max="100"
                step="5"
                class="range-input"
              >
              <span class="range-value">{{ withdrawalRulesForm.get('keepPercentageOfProfit')?.value }}%</span>
            </div>
            <div class="help-text">
              Pourcentage des profits à conserver dans le compte après avoir atteint l'objectif.
            </div>
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn btn-primary" [disabled]="withdrawalRulesForm.invalid">Enregistrer</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
